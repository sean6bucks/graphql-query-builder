!function(r){"use strict";function e(r){var e=r.map(function(e,a){var n=r[a];if(Array.isArray(n)||"object"!=typeof n){if("string"==typeof n)return n;throw new RangeError("cannot handle value type of "+n)}var t;if(n.func){var t=s(n);return i(t)}if(n.alias){if(!n.value&&!n.values)throw new RangeError('Alias objects must have "value" String or "values" Array. was passed: '+JSON.stringify(n));if(n.value&&"string"!=typeof n.value)throw new RangeError('Alias objects should only have one String for "value". was passed: '+JSON.stringify(n));if(n.values){if(!Array.isArray(n.values)&&"string"!=typeof n.values)throw new TypeError('"values" must be an Array with single value or single String value');if(Array.isArray(n.values)&&n.values.length>1)throw new RangeError('"values" Array should only have one value. was passed: '+JSON.stringify(n))}var o=n.alias,u=n.value?n.value:Array.isArray(n.values)?n.values[0]:n.values}else{var f=Object.keys(n);if(1!==f.length)throw new RangeError("Alias objects should only have one value. was passed: "+JSON.stringify(n));var o=f[0],u=n[o]}return o+":"+u});return e.join(",")}function a(r){return"string"==typeof r?r=JSON.stringify(r):Array.isArray(r)?(r=r.map(function(r){return a(r)}).join(),r="["+r+"]"):"object"==typeof r&&(r=t(r)),r}function n(r){var e=[];for(var n in r)if("function"!=typeof r[n]){var t=a(r[n]);"{}"!==t&&e.push(n+":"+t)}return e}function t(r){var e=[];for(var n in r)"function"!=typeof r[n]&&e.push(n+":"+a(r[n]));return"{"+e.join()+"}"}function i(r){if(void 0===r.bodyS)throw new ReferenceError('return properties are not defined. use the "values" object to defined them');return(r.aliasS?r.aliasS+":":"")+r.fnNameS+(0<r.filtersA.length?"("+r.filtersA.join(",")+")":"")+"{"+r.bodyS+"}"}function s(r){var a={};if(!r.func||"string"!=typeof r.func)throw new TypeError('"name" has been sent as a non-string value');if(a.fnNameS=r.func,r.alias){if("string"!=typeof r.alias)throw new TypeError("Alias must be a String value");a.aliasS=r.alias}if(r.filters){if("object"!=typeof r.filters||Array.isArray(r.filters))throw new TypeError("Function filters must be passed as object with key values");a.filtersA=n(r.filters)}if(!r.values||!r.values.length)throw new TypeError('"values" can not be >>falsy<< value');if(!Array.isArray(r.values)&&"string"!==r.values)throw new TypeError('"values" must be an Array of values or single String value');return a.bodyS=Array.isArray(r.values)?e(r.values):r.values,a}function o(r){var e={prefix:"query="};if(r&&!Array.isArray(r)&&"object"==typeof r&&r.prefix){if("string"!=typeof r.prefix)throw new TypeError('"prefix" option must be a String value');e.prefix=r.prefix}return e}function u(r,e){if(void 0===r||"object"!=typeof r)throw new TypeError("Query data must be an object or array of query objects");var a=o(e);Array.isArray(r)||(r=[r]);var n=r,t=[];return n.forEach(function(r){var e=s(r);t.push(i(e))}),a.prefix+"{"+t.join(" ")+"}"}r.Query=u}(window);