!function(r,e){"function"==typeof define&&define.amd?define(["exports"],e):e("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:r.commonJsStrict={})}(this,function(r){"use strict";function e(r){var e=r.map(function(e,a){var t=r[a];if(Array.isArray(t)||"object"!=typeof t){if("string"==typeof t)return t;throw new RangeError("cannot handle value type of "+t)}var n;if(t.func){var n=i(t);return o(n)}if(t.alias){if(!t.value&&!t.values)throw new RangeError('Alias objects must have "value" String or "values" Array. was passed: '+JSON.stringify(t));if(t.value&&"string"!=typeof t.value)throw new RangeError('Alias objects should only have one String for "value". was passed: '+JSON.stringify(t));if(t.values){if(!Array.isArray(t.values)&&"string"!=typeof t.values)throw new TypeError('"values" must be an Array with single value or single String value');if(Array.isArray(t.values)&&t.values.length>1)throw new RangeError('"values" Array should only have one value. was passed: '+JSON.stringify(t))}var s=t.alias,u=t.value?t.value:Array.isArray(t.values)?t.values[0]:t.values}else{var f=Object.keys(t);if(1!==f.length)throw new RangeError("Alias objects should only have one value. was passed: "+JSON.stringify(t));var s=f[0],u=t[s]}return s+":"+u});return e.join(",")}function a(r){return"string"==typeof r?r=JSON.stringify(r):Array.isArray(r)?(r=r.map(function(r){return a(r)}).join(),r="["+r+"]"):"object"==typeof r&&(r=n(r)),r}function t(r){var e=[];for(var t in r)if("function"!=typeof r[t]){var n=a(r[t]);"{}"!==n&&e.push(t+":"+n)}return e}function n(r){var e=[];for(var t in r)"function"!=typeof r[t]&&e.push(t+":"+a(r[t]));return"{"+e.join()+"}"}function o(r){if(void 0===r.bodyS)throw new ReferenceError('return properties are not defined. use the "values" object to defined them');return(r.aliasS?r.aliasS+":":"")+r.fnNameS+(0<r.filtersA.length?"("+r.filtersA.join(",")+")":"")+"{"+r.bodyS+"}"}function i(r){var a={};if(!r.func||"string"!=typeof r.func)throw new TypeError('"name" has been sent as a non-string value');if(a.fnNameS=r.func,r.alias){if("string"!=typeof r.alias)throw new TypeError("Alias must be a String value");a.aliasS=r.alias}if(r.filters){if("object"!=typeof r.filters||Array.isArray(r.filters))throw new TypeError("Function filters must be passed as object with key values");a.filtersA=t(r.filters)}if(!r.values||!r.values.length)throw new TypeError('"values" can not be >>falsy<< value');if(!Array.isArray(r.values)&&"string"!==r.values)throw new TypeError('"values" must be an Array of values or single String value');return a.bodyS=Array.isArray(r.values)?e(r.values):r.values,a}function s(r){var e={prefix:"query="};if(r&&!Array.isArray(r)&&"object"==typeof r&&r.prefix){if("string"!=typeof r.prefix)throw new TypeError('"prefix" option must be a String value');e.prefix=r.prefix}return e}function u(r,e){if(void 0===r||"object"!=typeof r)throw new TypeError("Query data must be an object or array of query objects");var a=s(e);Array.isArray(r)||(r=[r]);var t=r,n=[];return t.forEach(function(r){var e=i(r);n.push(o(e))}),a.prefix+"{"+n.join(" ")+"}"}r.Query=window.Query=u,"object"==typeof module&&module.exports&&(module.exports=u)});